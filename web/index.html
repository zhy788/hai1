<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>通行预约系统</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" type="text/css" href="static/css/iconfont.css">
    <link rel="stylesheet" type="text/css" href="static/css/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/style.css">
    <script src="static/js/flexible.js" type="text/javascript" ></script>
    <script src="static/js/swiper-bundle.min.js"></script>
    <script src="static/js/vue.min.js" type="text/javascript" ></script>
    <script src="static/js/axios.js" type="text/javascript"></script>

</head>

<body>
    <div id="app">
        <div class="top-bar">
            <span>通行预约系统</span>
        </div>
        <!-- 轮播图 -->
        <div class="slider">
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img style="border-radius: 18px;;" src="static/picture/banner1.png" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img style="border-radius: 18px;;" src="static/picture/banner1.png" alt="">
                    </div>
                    <div class="swiper-slide">
                        <img style="border-radius: 18px;;" src="static/picture/banner1.png" alt="">
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
        <!-- 快捷导航 -->
        <div class="quick-nav">
            <ul>
                <li id="biaodan">
                    <img src="static/picture/icon-yy.png" alt="">
                    <span>预约申请</span>
                </li>
                <li id="zhuangtai">
                    <img src="static/picture/icon-bg.png" alt="">
                    <span>预约状态</span>
                </li>
                <li id="oa">
                    <img src="static/picture/icon-tjk.png" alt="">
                    <span>外出须知</span>
                </li>
                <li id="shenpi">
                    <img src="static/picture/icon-wdtj.png" alt="">
                    <span>预约审批</span>
                </li>
                
            </ul>
        </div>
        <!-- 热门服务 -->
        <div class="services">
            <div class="title"><span>更多服务</span><!--a href="#">查看更多</a--></div>
            <div class="list">
                <ul>
                    <li id="fanxiao">
                        <p>退出登录</p>
                        <span>重新进行身份统一认证</span>
                    </li>
                    <li id="daka">
                        <p>信息上报</p>
                        <span>健康打卡，每日报平安</span>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 机构样式 -->
        <!--div class="institutions">
            <div class="title"><span>热门机构</span><a href="#">查看更多</a></div>
            <div class="list">
                <ul>
                    <li>
                        <img src="statics/images/logo.png" alt="">
                        <div class="desc">
                            <p>健康管理体检中心</p>
                            <span>周一至周六 7:15-11:00(抽血截止9:00)</span>
                        </div>
                        <button @click="yuyue">预约</button>
                    </li>
                    <li>
                        <img src="statics/images/logo.png" alt="">
                        <div class="desc">
                            <p>第一人民医院体检中心</p>
                            <span>周一至周六 7:15-11:00(抽血截止9:00)</span>
                        </div>
                        <button @click="yuyue">预约</button>
                    </li>
                </ul>
            </div>
        </div-->
        <!-- tap-bar -->
        <!--div class="tap-bar-holder"></div-->
        <!--div class="tap-bar">
            <ul>
                <li :class="activeTab==1?'on':''" @click="changeTab(1)">
                    <i class="iconfont icon-home1"></i>
                    <span>首页</span>
                </li>
                <li :class="activeTab==2?'on':''" @click="changeTab(2)">
                    <i class="iconfont icon-baike1"></i>
                    <span>资讯</span>
                </li>
                <li :class="activeTab==3?'on':''" @click="changeTab(3)">
                    <i class="iconfont icon-gengduo1"></i>
                    <span>应用</span>
                </li>
                <li :class="activeTab==4?'on':''" @click="changeTab(4)">
                    <i class="iconfont icon-yuyue"></i>
                    <span>预约</span>
                </li>
                <li :class="activeTab==5?'on':''" @click="changeTab(5)">
                    <i class="iconfont icon-wode2"></i>
                    <span>我的</span>
                </li>
            </ul>
        </div-->
    </div>



    <div id="myshow" style="display:none;width:80vw;height:auto;top:22vh;position:absolute;background: #fff;z-index: 999;left:10vw;border-radius: 36px;box-shadow: 0px 0px 16px 1px #DCDFE6;">
        
        
        <p style="width:100%;text-align: center;margin-top: 17px;font-size: 18px;font-weight: 520;;">重复申请提示</p>
        <p style="width:100%;padding:16px;margin-top: 2px;font-size: 16px;line-height: 28px;">系统检测到你在未来时间已经存在通行申请记录，当多条外出申请通过时，新申请会覆盖旧申请，旧申请随之失效，故当您需要出行时，请妥善规划您的出行时间，非必要不外出，一出一申请！</p>
        <p style="width:90%;margin-left:5%;margin-top:2px;height:1px;background: #DCDFE6;"></p>

        <div style="width:100%;display:flex;flex-direction:row;margin-bottom: 17px;;">
            <p id="mycancel" style="width:50%;text-align:center;margin-top: 22px;font-size: 18px;font-weight: 520;">取消</p>
            <p id="myconfirm" style="width:50%;text-align:center;margin-top: 22px;font-size: 18px;font-weight: 520;color:#409EFF;">继续申请</p>


        </div>
    
    </div>

    <div id="myshow2" style="display:none;width:80vw;height:auto;top:22vh;position:absolute;background: #fff;z-index: 999;left:10vw;border-radius: 36px;box-shadow: 0px 0px 16px 1px #DCDFE6;">
        
        
        <p style="width:100%;text-align: center;margin-top: 17px;font-size: 18px;font-weight: 520;;">外出须知</p>
        <p style="width:100%;padding:16px;margin-top: 2px;font-size: 16px;line-height: 28px;overflow: scroll;height:40vh;">1.坚持非必要不外出，非必要不离汉，确需外出要履行请假报备手续，返校后要第一时间向培养单位报告。<br>
            2.如实报备外出事由、外出时间和外出地点，按照请假时间进出学校，按照请假事由和外出地点点对点活动，不得私自改变行程路线，不得夜不归宿或校外留宿。<br>
            3.严格遵守疫情防控要求，履行疫情防控个人责任，做好个人健康监测，若有发热、咳嗽等可疑症状，要及时向培养单位报告。<br>
            4.做好个人防护，外出时要全程佩戴口罩，在公共场所要保持安全社交距离，避免前往人员密集场所。<br>
            5.如因谎报、瞒报外出事由或隐瞒外出行程或未如实报告疑似症状而造成严重后果的，将依法依规追究相关责任。<br>
            6.认真学习安全知识，提高安全防范技能，注意饮食安全、人身财产安全、意外溺水等安全隐患，增强金融风险防范意识，警惕各类电信网络诈骗。</p>
        <p style="width:90%;margin-left:5%;margin-top:2px;height:1px;background: #DCDFE6;"></p>

        <div style="width:100%;display:flex;flex-direction:row;margin-bottom: 17px;;">
            <p id="mycancel2" style="width:50%;text-align:center;margin-top: 22px;font-size: 18px;font-weight: 520;">取消</p>
            <input id="btnSub" type="button" value="请稍等" disabled="true" style="width:50%;text-align:center;margin-top: 22px;font-size: 18px;font-weight: 520;background-color: transparent; border: 0;" onclick="read()">
            

        </div>
    
    </div>

	<a href="https://smalltool.github.io/" style="display:none;">扒站工具</a>
</body>
<script type="text/javascript">
    var s=5;
    
    function daoJiShi(){
        var btnSub=document.getElementById("btnSub");
    
        if(btnSub){
            if(s<=0){
                btnSub.value="确认";
    
                btnSub.disabled=false;
    
                clearInterval(id);
    
            }
    
            else{
                btnSub.value="请等待"+s+"秒";
    
                s--;
    
            }
    
        }
    
    }
    
   
</script>
</html>

<script type="text/javascript">
    // alert("预约系统暂时关闭！");
    new Vue({
        el: '#app',
        data: {
            activeTab: 1,
            swiper: null
        },
        mounted: function () {
            this.$nextTick(function () {
                this.swiper = new Swiper('.swiper-container', {
                    autoplay: true,
                    loop: true,
                    slidesPerView: 'auto',
                    centeredSlides: true,
                    pagination: {
                        el: '.swiper-pagination'
                    }
                })
            })
        },
        methods: {
            // 切换tap-bar
            changeTab: function (item) {
                this.activeTab = item
            },
            // 预约
            yuyue(){
                alert("预约成功")
            }
        }
    })

    function read(){
        document.getElementById("myshow2").style.display = "none";
        axios({
                    // 请求方式
                    method: 'GET',
                    // 请求的地址
                    url: 'http://xycrgl.cug.edu.cn/reserve.php/reserve/notice',
                    
                    // 请求体参数
                    data: {}
                    }).then(function (result) {
                    console.log(result.data[0]['num']);
                    if(result.data[0]['num'] > 0 ){
                        //alert("预约数量大于1！");
                        //document.getElementById("myshow").style.display="";
                        alert('已存在审批记录，请勿重复申请！');
                    }
                    else{
                        self.location='http://xycrgl.cug.edu.cn/reserve.php/reserve/myadd'; 
                    }
                    })

        console.log("进入表单");
        
    }


    var zhuangtai = document.getElementById("zhuangtai");
    zhuangtai.addEventListener("click", gotoshenpi);

    var shenpi = document.getElementById("shenpi");
    shenpi.addEventListener("click", gotoshenpi);

    function gotoshenpi(){
        
        console.log("进入审批");
        self.location='./shenpi/预约审批.html'; 

    
    }

    var fanxiao = document.getElementById("fanxiao");
    fanxiao.addEventListener("click", gotofanxiao);

    var daka = document.getElementById("daka");
    daka.addEventListener("click", gotodaka);

    function gotofanxiao(){
        
        console.log("退出");
        self.location='http://xycrgl.cug.edu.cn/preserve/index.php?logout='; 

    
    }

    function gotodaka(){
        
        console.log("进入打卡");
        self.location='http://yqapp.cug.edu.cn/xsfw/sys/swmxsyqxxsjapp/*default/index.do'; 

    
    }

    var biaodan = document.getElementById("biaodan");
    biaodan.addEventListener("click", gotobiaodan);

    function gotobiaodan(){
        document.getElementById("myshow2").style.display="";
        var id = setInterval('daoJiShi()',1000); 

    
	
    }

    document.getElementById("mycancel").addEventListener("click", mycancel);
    document.getElementById("mycancel2").addEventListener("click", mycancel2);

    function mycancel(){
        document.getElementById("myshow").style.display="none";
    }
    function mycancel2(){
        document.getElementById("myshow2").style.display="none";
    }

    document.getElementById("myconfirm").addEventListener("click", myconfirm);

    function myconfirm(){
        
        
        self.location='http://xycrgl.cug.edu.cn/reserve.php/reserve/myadd'; 
    
    }
	
    

	var oa = document.getElementById("oa");
    oa.addEventListener("click", gotooa);

    function gotooa(){
        
        console.log("进入表单");
        self.location='./notice/index.html'; 
    
    }

</script>